(this["webpackJsonpreact-chat"]=this["webpackJsonpreact-chat"]||[]).push([[0],{16:function(e,t,a){e.exports=a(30)},21:function(e,t,a){},23:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(12),o=a.n(c),i=(a(21),a(9)),l=a.n(i),s=a(13),u=a(6),m=(a(23),a(5)),d=a.n(m),h=(a(24),a(28),a(31),a(10)),p=a(15);d.a.initializeApp({apiKey:"AIzaSyDjpYw7zlHeUwwADKXAffp8FwLyaVwoDSA",authDomain:"pubchat-8d240.firebaseapp.com",databaseURL:"https://pubchat-8d240-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"pubchat-8d240",storageBucket:"pubchat-8d240.appspot.com",messagingSenderId:"447629372841",appId:"1:447629372841:web:fdf71454868b804bfb68b8",measurementId:"G-PTR442H45G"});var b=d.a.auth(),g=d.a.firestore();d.a.analytics();function f(e){var t=e.setWantToSignIn;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"sign-in",onClick:function(){var e=new d.a.auth.GoogleAuthProvider;b.signInWithPopup(e)}},"I want to send a message to ","Karthik"),r.a.createElement("br",null),r.a.createElement("button",{className:"sign-in-no",onClick:function(){t(!1)}},"No, I am here just to see ","Karthik","'s chat"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h2",{className:"warning"},"Want to say something to Karthik which others also see?"),r.a.createElement("p",{className:"warning"},"Maintained by ",r.a.createElement("b",null,"Karthik")," & its completely safe \ud83d\udc97\ud83d\ude00\ud83d\udc97 "))}function E(){return b.currentUser&&r.a.createElement("button",{className:"sign-out",onClick:function(){return b.signOut()}},"Sign Out")}function v(e){var t=e.setWantToSignIn,a=Object(h.a)(b),c=Object(u.a)(a,1)[0],o=Object(n.useRef)(),i=g.collection("messages"),m=i.orderBy("createdAt").limit(Number("600")),f=Object(p.a)(m,{idField:"id"}),E=Object(u.a)(f,1)[0],v=Object(n.useState)(""),k=Object(u.a)(v,2),j=k[0],I=k[1],S=function(){var e=Object(s.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=b.currentUser,n=a.uid,r=a.photoURL,e.next=4,i.add({text:j,createdAt:d.a.firestore.FieldValue.serverTimestamp(),uid:n,photoURL:r});case 4:I(""),o.current.scrollIntoView({behavior:"smooth"});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("main",null,E&&E.map((function(e){return r.a.createElement(w,{key:e.id,message:e})})),r.a.createElement("span",{ref:o})),c?r.a.createElement("form",{onSubmit:S},r.a.createElement("input",{value:j,onChange:function(e){return I(e.target.value)},placeholder:"say something nice"}),r.a.createElement("button",{type:"submit",disabled:!j},"\ud83d\udd4a\ufe0f")):r.a.createElement("button",{onClick:function(){return t(!0)},className:"alternate-form-submit"},"Please Signin to send message"))}function w(e){var t,a=e.message,n=a.text,c=void 0===n?null:n,o=a.uid,i=void 0===o?null:o,l=a.photoURL,s=i===(null===b||void 0===b||null===(t=b.currentUser)||void 0===t?void 0:t.uid)?"sent":"received",u="https://lh3.googleusercontent.com/a/AAcHTtebeXkDMuISZY9gPoxgtRTEZ3Jku0ztguQ-eT8uSw=s96-c"==l?"owner":"others";return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"message ".concat(s," ").concat(u)},r.a.createElement("img",{src:l||"https://api.adorable.io/avatars/23/abott@adorable.png"}),r.a.createElement("p",null,c)))}var k=function(){var e=Object(h.a)(b),t=Object(u.a)(e,1)[0],a=Object(n.useState)(!1),c=Object(u.a)(a,2),o=c[0],i=c[1];return r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement("h1",null,"Karthik Chat"),r.a.createElement(E,null)),r.a.createElement("section",null,o&&!t?r.a.createElement(f,{setWantToSignIn:i}):r.a.createElement(v,{setWantToSignIn:i})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.0a21c080.chunk.js.map